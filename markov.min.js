/* @ Src TheGreatRambler https://github.com/TheGreatRambler/markov.js */
(function(b,a){"function"===typeof define&&define.amd?define([],a):"object"===typeof module&&module.exports?module.exports=a():b.Markov=a()})("undefined"!==typeof self?self:this,function(){var b=function(a){this.data=a;this.createCorpus()};b.prototype.createCorpus=function(){var a,d={};this.data.regularity=this.data.regularity||1;"[object String]"===Object.prototype.toString.call(this.data.music)?a=this.data.music.split("undefined"!==typeof this.data.delimiter?this.data.delimiter:" "):this.data.music.constructor===
Array?"[object String]"===Object.prototype.toString.call(this.data.music[0])?a=this.data.music:console.warn("Data elements must be strings!"):console.warn("Data must be an array or string!");musiclength=a.length;for(var f=this.data.regularity;f<musiclength;f++){var c=a[f];if(c){for(var e=[],b=0;b<this.data.regularity;b++)e.push(a[f-this.data.regularity+b]);"undefined"===typeof d[e.join(" ")]?d[e.join(" ")]=[c]:d[e.join(" ")].push(c)}}this.musicarray=a;this.corpus=d};b.prototype.generate=function(a){var d=
Object.keys(this.corpus);d=d[~~(d.length*Math.random())].split(" ");a=a||1E3;for(var b=0;b<a;b++){for(var c=[],e=0;e<this.data.regularity;e++)c.push(d[b+e]);c=this.corpus[c.join(" ")];if(!c)break;d.push(c[~~(c.length*Math.random())]);c[~~(c.length*Math.random())]||console.log(c)}return d.join(" ")};return b});
