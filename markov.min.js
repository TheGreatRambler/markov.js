/* @ Src TheGreatRambler https://github.com/TheGreatRambler/markov.js */
(function(b,c){"function"===typeof define&&define.amd?define([],c):"object"===typeof module&&module.exports?module.exports=c():b.Markov=c()})("undefined"!==typeof self?self:this,function(){var b=function(c){this.data=c;this.createCorpus()};b.prototype.createCorpus=function(){var c={};this.data.regularity=this.data.regularity||1;if("[object String]"===Object.prototype.toString.call(this.data.input))var d=this.data.input.split("undefined"!==typeof this.data.delimiter?this.data.delimiter:" ");else{var a=
this.data.input;Array.isArray(a)||a&&"object"===typeof a&&"number"===typeof a.length&&(0===a.length||0<a.length&&a.length-1 in a)?d=this.data.input:console.warn("Data must be an array or string!")}musiclength=d.length;for(a=this.data.regularity;a<musiclength;a++){var e=d[a];if(e){for(var b=[],f=0;f<this.data.regularity;f++)b.push(d[a-this.data.regularity+f]);"undefined"===typeof c[b.join(" ")]?c[b.join(" ")]=[e]:c[b.join(" ")].push(e)}}this.musicarray=d;this.corpus=c};b.prototype.generate=function(c){var d=
Object.keys(this.corpus);this.string=d[~~(d.length*Math.random())].split(" ");c=c||1E3;for(d=0;d<c;d++){for(var a=[],b=0;b<this.data.regularity;b++)a.push(this.string[d+b]);a=this.corpus[a.join(" ")];if(!a)break;this.string.push(a[~~(a.length*Math.random())]);a[~~(a.length*Math.random())]||console.log(a)}return this.string.join(" ")};return b});
